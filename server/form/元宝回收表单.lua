local lua_path = lualib:IO_GetLuaPath()
local package_path = package.path
package.path = string.format("%s;%s?.lua;%s?", package_path, lua_path, lua_path)
require("system/timecount_def")
require("system/serializer")


local	equip_table=		--元宝,绑定元宝,金币,绑定金币,点卷
[[
{	
--黄阶装备回收
{
{"头盔1",10,0},
{"项链1",10,0},
{"手镯1",10,0},
{"手镯1-1",10,0},
{"戒指1",10,0},
{"戒指1-1",10,0},
{"腰带1",10,0},
{"靴子1",10,0},
{"头盔2",20,0},
{"项链2",20,0},
{"手镯2",20,0},
{"手镯2-1",20,0},
{"戒指2",20,0},
{"戒指2-1",20,0},
{"腰带2",20,0},
{"靴子2",20,0},
{"头盔3",30,0},
{"项链3",30,0},
{"手镯3",30,0},
{"手镯3-1",30,0},
{"戒指3",30,0},
{"戒指3-1",30,0},
{"腰带3",30,0},
{"靴子3",30,0},
{"头盔4",40,0},
{"项链4",40,0},
{"手镯4",40,0},
{"手镯4-1",40,0},
{"戒指4",40,0},
{"戒指4-1",40,0},
{"腰带4",40,0},
{"靴子4",40,0},
{"头盔5",50,0},
{"项链5",50,0},
{"手镯5",50,0},
{"手镯5-1",50,0},
{"戒指5",50,0},
{"戒指5-1",50,0},
{"腰带5",50,0},
{"靴子5",50,0},
{"头盔6",60,0},
{"项链6",60,0},
{"手镯6",60,0},
{"手镯6-1",60,0},
{"戒指6",60,0},
{"戒指6-1",60,0},
{"腰带6",60,0},
{"靴子6",60,0},
{"头盔7",70,0},
{"项链7",70,0},
{"手镯7",70,0},
{"手镯7-1",70,0},
{"戒指7",70,0},
{"戒指7-1",70,0},
{"腰带7",70,0},
{"靴子7",70,0},
{"头盔8",80,0},
{"项链8",80,0},
{"手镯8",80,0},
{"手镯8-1",80,0},
{"戒指8",80,0},
{"戒指8-1",80,0},
{"腰带8",80,0},
{"靴子8",80,0},
{"头盔9",90,0},
{"项链9",90,0},
{"手镯9",90,0},
{"手镯9-1",90,0},
{"戒指9",90,0},
{"戒指9-1",90,0},
{"腰带9",90,0},
{"靴子9",90,0},
{"头盔10",100,0},
{"项链10",100,0},
{"手镯10",100,0},
{"手镯10-1",100,0},
{"戒指10",100,0},
{"戒指10-1",100,0},
{"腰带10",100,0},
{"靴子10",100,0},
},
--玄阶装备回收
{
{"头盔11",10,0},
{"项链11",10,0},
{"手镯11",10,0},
{"手镯11-1",10,0},
{"戒指11",10,0},
{"戒指11-1",10,0},
{"腰带11",10,0},
{"靴子11",10,0},
{"头盔12",20,0},
{"项链12",20,0},
{"手镯12",20,0},
{"手镯12-1",20,0},
{"戒指12",20,0},
{"戒指12-1",20,0},
{"腰带12",20,0},
{"靴子12",20,0},
{"头盔13",30,0},
{"项链13",30,0},
{"手镯13",30,0},
{"手镯13-1",30,0},
{"戒指13",30,0},
{"戒指13-1",30,0},
{"腰带13",30,0},
{"靴子13",30,0},
{"头盔14",40,0},
{"项链14",40,0},
{"手镯14",40,0},
{"手镯14-1",40,0},
{"戒指14",40,0},
{"戒指14-1",40,0},
{"腰带14",40,0},
{"靴子14",40,0},
{"头盔15",50,0},
{"项链15",50,0},
{"手镯15",50,0},
{"手镯15-1",50,0},
{"戒指15",50,0},
{"戒指15-1",50,0},
{"腰带15",50,0},
{"靴子15",50,0},
{"头盔16",60,0},
{"项链16",60,0},
{"手镯16",60,0},
{"手镯16-1",60,0},
{"戒指16",60,0},
{"戒指16-1",60,0},
{"腰带16",60,0},
{"靴子16",60,0},
{"头盔17",70,0},
{"项链17",70,0},
{"手镯17",70,0},
{"手镯17-1",70,0},
{"戒指17",70,0},
{"戒指17-1",70,0},
{"腰带17",70,0},
{"靴子17",70,0},
{"头盔18",80,0},
{"项链18",80,0},
{"手镯18",80,0},
{"手镯18-1",80,0},
{"戒指18",80,0},
{"戒指18-1",80,0},
{"腰带18",80,0},
{"靴子18",80,0},
{"头盔19",90,0},
{"项链19",90,0},
{"手镯19",90,0},
{"手镯19-1",90,0},
{"戒指19",90,0},
{"戒指19-1",90,0},
{"腰带19",90,0},
{"靴子19",90,0},
{"头盔20",100,0},
{"项链20",100,0},
{"手镯20",100,0},
{"手镯20-1",100,0},
{"戒指20",100,0},
{"戒指20-1",100,0},
{"腰带20",100,0},
{"靴子20",100,0},
},
--地阶装备回收
{
{"头盔21",10,0},
{"项链21",10,0},
{"手镯21",10,0},
{"手镯21-1",10,0},
{"戒指21",10,0},
{"戒指21-1",10,0},
{"腰带21",10,0},
{"靴子21",10,0},
{"头盔22",20,0},
{"项链22",20,0},
{"手镯22",20,0},
{"手镯22-1",20,0},
{"戒指22",20,0},
{"戒指22-1",20,0},
{"腰带22",20,0},
{"靴子22",20,0},
{"头盔23",30,0},
{"项链23",30,0},
{"手镯23",30,0},
{"手镯23-1",30,0},
{"戒指23",30,0},
{"戒指23-1",30,0},
{"腰带23",30,0},
{"靴子23",30,0},
{"头盔24",40,0},
{"项链24",40,0},
{"手镯24",40,0},
{"手镯24-1",40,0},
{"戒指24",40,0},
{"戒指24-1",40,0},
{"腰带24",40,0},
{"靴子24",40,0},
{"头盔25",50,0},
{"项链25",50,0},
{"手镯25",50,0},
{"手镯25-1",50,0},
{"戒指25",50,0},
{"戒指25-1",50,0},
{"腰带25",50,0},
{"靴子25",50,0},
{"头盔26",60,0},
{"项链26",60,0},
{"手镯26",60,0},
{"手镯26-1",60,0},
{"戒指26",60,0},
{"戒指26-1",60,0},
{"腰带26",60,0},
{"靴子26",60,0},
{"头盔27",70,0},
{"项链27",70,0},
{"手镯27",70,0},
{"手镯27-1",70,0},
{"戒指27",70,0},
{"戒指27-1",70,0},
{"腰带27",70,0},
{"靴子27",70,0},
{"头盔28",80,0},
{"项链28",80,0},
{"手镯28",80,0},
{"手镯28-1",80,0},
{"戒指28",80,0},
{"戒指28-1",80,0},
{"腰带28",80,0},
{"靴子28",80,0},
{"头盔29",90,0},
{"项链29",90,0},
{"手镯29",90,0},
{"手镯29-1",90,0},
{"戒指29",90,0},
{"戒指29-1",90,0},
{"腰带29",90,0},
{"靴子29",90,0},
{"头盔30",100,0},
{"项链30",100,0},
{"手镯30",100,0},
{"手镯30-1",100,0},
{"戒指30",100,0},
{"戒指30-1",100,0},
{"腰带30",100,0},
{"靴子30",100,0},
},
--天阶装备回收
{
{"头盔31",10,0},
{"项链31",10,0},
{"手镯31",10,0},
{"手镯31-1",10,0},
{"戒指31",10,0},
{"戒指31-1",10,0},
{"腰带31",10,0},
{"靴子31",10,0},
{"头盔32",20,0},
{"项链32",20,0},
{"手镯32",20,0},
{"手镯32-1",20,0},
{"戒指32",20,0},
{"戒指32-1",20,0},
{"腰带32",20,0},
{"靴子32",20,0},
{"头盔33",30,0},
{"项链33",30,0},
{"手镯33",30,0},
{"手镯33-1",30,0},
{"戒指33",30,0},
{"戒指33-1",30,0},
{"腰带33",30,0},
{"靴子33",30,0},
{"头盔34",40,0},
{"项链34",40,0},
{"手镯34",40,0},
{"手镯34-1",40,0},
{"戒指34",40,0},
{"戒指34-1",40,0},
{"腰带34",40,0},
{"靴子34",40,0},
{"头盔35",50,0},
{"项链35",50,0},
{"手镯35",50,0},
{"手镯35-1",50,0},
{"戒指35",50,0},
{"戒指35-1",50,0},
{"腰带35",50,0},
{"靴子35",50,0},
{"头盔36",60,0},
{"项链36",60,0},
{"手镯36",60,0},
{"手镯36-1",60,0},
{"戒指36",60,0},
{"戒指36-1",60,0},
{"腰带36",60,0},
{"靴子36",60,0},
{"头盔37",70,0},
{"项链37",70,0},
{"手镯37",70,0},
{"手镯37-1",70,0},
{"戒指37",70,0},
{"戒指37-1",70,0},
{"腰带37",70,0},
{"靴子37",70,0},
{"头盔38",80,0},
{"项链38",80,0},
{"手镯38",80,0},
{"手镯38-1",80,0},
{"戒指38",80,0},
{"戒指38-1",80,0},
{"腰带38",80,0},
{"靴子38",80,0},
{"头盔39",90,0},
{"项链39",90,0},
{"手镯39",90,0},
{"手镯39-1",90,0},
{"戒指39",90,0},
{"戒指39-1",90,0},
{"腰带39",90,0},
{"靴子39",90,0},
{"头盔40",100,0},
{"项链40",100,0},
{"手镯40",100,0},
{"手镯40-1",100,0},
{"戒指40",100,0},
{"戒指40-1",100,0},
{"腰带40",100,0},
{"靴子40",100,0},
},
--武器回收
{
{"武器1",1000,0},
{"武器2",1000,0},
{"武器3",1000,0},
{"武器4",1000,0},
{"武器5",1000,0},
{"武器6",1000,0},
{"武器7",1000,0},
{"武器8",1000,0},
{"武器9",1000,0},
{"武器10",1000,0},
{"武器11",1000,0},
{"武器12",1000,0},
{"武器13",1000,0},
{"武器14",1000,0},
{"武器15",1000,0},
{"武器16",1000,0},
{"武器17",1000,0},
{"武器18",1000,0},
{"武器19",1000,0},
{"武器20",1000,0},
{"武器21",1000,0},
{"武器22",1000,0},
{"武器23",1000,0},
{"武器24",1000,0},
{"武器25",1000,0},
{"武器26",1000,0},
{"武器27",1000,0},
{"武器28",1000,0},
{"武器29",1000,0},
{"武器30",1000,0},
},
--衣服盾牌
{
{"衣服1",1000,0},
{"衣服2",1000,0},
{"衣服3",1000,0},
{"衣服4",1000,0},
{"衣服5",1000,0},
{"衣服6",1000,0},
{"衣服7",1000,0},
{"衣服8",1000,0},
{"衣服9",1000,0},
{"衣服10",1000,0},
{"衣服11",1000,0},
{"衣服12",1000,0},
{"衣服13",1000,0},
{"衣服14",1000,0},
{"衣服15",1000,0},
{"衣服16",1000,0},
{"衣服17",1000,0},
{"衣服18",1000,0},
{"衣服19",1000,0},
{"衣服20",1000,0},
{"衣服21",1000,0},
{"衣服22",1000,0},
{"衣服23",1000,0},
{"衣服24",1000,0},
{"衣服25",1000,0},
{"衣服26",1000,0},
{"衣服27",1000,0},
{"衣服28",1000,0},
{"衣服29",1000,0},
{"衣服30",1000,0},
{"盾牌1",1000,0},
{"盾牌2",1000,0},
{"盾牌3",1000,0},
{"盾牌4",1000,0},
{"盾牌5",1000,0},
{"盾牌6",1000,0},
{"盾牌7",1000,0},
{"盾牌8",1000,0},
{"盾牌9",1000,0},
{"盾牌10",1000,0},
},
--神器剑甲
{
{"武器31",1000,0},
{"武器32",1000,0},
{"武器33",1000,0},
{"武器34",1000,0},
{"武器35",1000,0},
{"武器36",1000,0},
{"武器37",1000,0},
{"武器38",1000,0},
{"武器39",1000,0},
{"武器40",1000,0},
{"武器41",1000,0},
{"武器42",1000,0},
{"武器43",1000,0},
{"武器44",1000,0},
{"武器45",1000,0},
{"衣服31",1000,0},
{"衣服32",1000,0},
{"衣服33",1000,0},
{"衣服34",1000,0},
{"衣服35",1000,0},
{"衣服36",1000,0},
{"衣服37",1000,0},
{"衣服38",1000,0},
{"衣服39",1000,0},
{"衣服40",1000,0},
{"衣服41",1000,0},
{"衣服42",1000,0},
{"衣服43",1000,0},
{"衣服44",1000,0},
{"衣服45",1000,0},
},
--神器首饰
{
{"头盔41",100,0},
{"项链41",100,0},
{"手镯41",100,0},
{"手镯41-1",100,0},
{"戒指41",100,0},
{"戒指41-1",100,0},
{"腰带41",100,0},
{"靴子41",100,0},
{"头盔42",100,0},
{"项链42",100,0},
{"手镯42",100,0},
{"手镯42-1",100,0},
{"戒指42",100,0},
{"戒指42-1",100,0},
{"腰带42",100,0},
{"靴子42",100,0},
{"头盔43",100,0},
{"项链43",100,0},
{"手镯43",100,0},
{"手镯43-1",100,0},
{"戒指43",100,0},
{"戒指43-1",100,0},
{"腰带43",100,0},
{"靴子43",100,0},
{"头盔44",100,0},
{"项链44",100,0},
{"手镯44",100,0},
{"手镯44-1",100,0},
{"戒指44",100,0},
{"戒指44-1",100,0},
{"腰带44",100,0},
{"靴子44",100,0},
{"头盔45",100,0},
{"项链45",100,0},
{"手镯45",100,0},
{"手镯45-1",100,0},
{"戒指45",100,0},
{"戒指45-1",100,0},
{"腰带45",100,0},
{"靴子45",100,0},
},
--法宝护符
{
{"法宝1",1000,0},
{"法宝2",1000,0},
{"符咒1",1000,0},
{"符咒2",1000,0},
},
--1-3阶4格
{
{"翅膀1",1000,0},
{"勋章1",1000,0},
{"宝石1",1000,0},
{"坐骑1",1000,0},
{"翅膀2",1000,0},
{"勋章2",1000,0},
{"宝石2",1000,0},
{"坐骑2",1000,0},
{"翅膀3",1000,0},
{"勋章3",1000,0},
{"宝石3",1000,0},
{"坐骑3",1000,0},
},
--4-6阶4格
{
{"翅膀4",1000,0},
{"勋章4",1000,0},
{"宝石4",1000,0},
{"坐骑4",1000,0},
{"翅膀5",1000,0},
{"勋章5",1000,0},
{"宝石5",1000,0},
{"坐骑5",1000,0},
{"翅膀6",1000,0},
{"勋章6",1000,0},
{"宝石6",1000,0},
{"坐骑6",1000,0},
},

--7-10阶4格
{
{"翅膀7",1000,0},
{"勋章7",1000,0},
{"宝石7",1000,0},
{"坐骑7",1000,0},
{"翅膀8",1000,0},
{"勋章8",1000,0},
{"宝石8",1000,0},
{"坐骑8",1000,0},
{"翅膀9",1000,0},
{"勋章9",1000,0},
{"宝石9",1000,0},
{"坐骑9",1000,0},
{"翅膀10",1000,0},
{"勋章10",1000,0},
{"宝石10",1000,0},
{"坐骑10",1000,0},
},
}]]




local e_table = loadstring("return "..equip_table)();


function  init(player)
	local shul = {}
	for i = 1,12 do 
	local llc = 0
    for k = 1,#e_table[i] do 
 	 llc = llc+lualib:ItemCount(player,e_table[i][k][1])
	end
	shul[i] = llc
	end
	local str1 = "Hsbd_table = "..serialize(shul);
	lualib:ShowFormWithContent(player, "脚本表单", str1);
	lualib:ShowFormWithContent(player,"form文件表单","元宝回收")	
	return	""
end

function huishou(player,num)
local num = tonumber(num)
local jinbi  = 0 
for i=1,#e_table[num] do 
shu = 	lualib:ItemCount(player,e_table[num][i][1]) 
if shu > 0 then 
alb = shu*e_table[num][i][2]
jinbi = jinbi+alb
lualib:DelItem(player, e_table[num][i][1], shu, 2, "回收删除", "回收删除")
end
end
if jinbi < 1 then 
lualib:MsgBox(player,"#COLORCOLOR_BROWN#没有可回收#COLOREND#")
return""
end
lualib:AddGold(player, jinbi, "装备回收", lualib:Name(player))
lualib:MsgBox(player,"#COLORCOLOR_BROWN#回收成功！获得"..jinbi.."金币#COLOREND#")	
local s = "玩家【"..lualib:Name(player).."】回收一批装备获得["..jinbi.."]金币"
  lualib:SysMsg_SendBroadcastColor(s, "", 1, 12)
	local shul = {}
	for i = 1,12 do 
	  llc = 0
    for k = 1,#e_table[i] do 
 	 llc = llc+lualib:ItemCount(player,e_table[i][k][1])
	end
	shul[i] = llc
	end
	local str1 = "Hsbd_table = "..serialize(shul);
	lualib:ShowFormWithContent(player, "脚本表单", str1);
	local str = 
	[[
	  
		Hsbd_init()
	]]
	lualib:ShowFormWithContent(player, "脚本表单", str)
return""
end	

function cangku(player) 
	
	 local msg = "喔……你的包裹又满了吗？赶快存到我这儿来吧，咱行走江湖之人，诚信为本，绝不会监守自盗哦！\n \n"
    msg = msg.."<@OpenWarehouse *01*打开仓库>    <@OpenWarehouseAdv *01*打开高级仓库>"

	lualib:NPCTalkDetail(player,msg,400,120)
end
	

function OpenWarehouse(player)
    lualib:OpenWarehouseEx(player)
    return ""
end

function OpenWarehouseAdv(player)
    lualib:OpenWarehouseAdvEx(player)
    return ""
end
