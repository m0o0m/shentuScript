OtherRoleHeadInfo = {}
OtherRoleHeadInfo._wnd = 0

OtherRoleHeadInfo.choosePlayer = 0
OtherRoleHeadInfo.name = 0
OtherRoleHeadInfo.item_tab = {
 ["触龙神"]= {"坚固手套","龙之手镯","三眼手镯","蓝翡翠项链","恶魔铃铛大"},--触龙神
 ["触龙神副本"]= {"坚固手套","龙之手镯","三眼手镯","蓝翡翠项链","恶魔铃铛大"},--触龙神副本
 ["白色恶猪"]= {"圣战手镯","法神手镯","天尊手镯","圣战戒指","法神戒指"},--白色恶猪
 ["玛雅一白色恶猪"]= {"圣战手镯","法神手镯","天尊手镯","圣战戒指","法神戒指"},--玛雅一白色恶猪
 ["白色恶猪副本"]= {"圣战手镯","法神手镯","天尊手镯","圣战戒指","法神戒指"},--白色恶猪副本
 ["沃玛教主"]= {"战将手镯","法灵手镯","散人手镯","战将头盔","法灵头盔"},--沃玛教主
 ["玛雅一沃玛教主"]= {"战将手镯","法灵手镯","散人手镯","战将头盔","法灵头盔"},--玛雅一沃玛教主
 ["天荒教主副本"]= {"战将手镯","法灵手镯","散人手镯","战将头盔","法灵头盔"},--沃玛教主副本
 ["祖玛教主"]= {"武魂手镯","魔魂手镯","玄魂手镯","武魂戒指","魔魂戒指"},--祖玛教主
 ["玛雅一祖玛教主"]= {"武魂手镯","魔魂手镯","玄魂手镯","武魂戒指","魔魂戒指"},--玛雅一祖玛教主
 ["祖玛教主副本"]= {"武魂手镯","魔魂手镯","玄魂手镯","武魂戒指","魔魂戒指"},--祖玛教主副本
 ["赤月恶魔"]= {"天武手镯","天魔手镯","天灵手镯","天武戒指","天魔戒指"},--赤月恶魔
 ["赤月恶魔副本"]= {"天武手镯","天魔手镯","天灵手镯","天武戒指","天魔戒指"},--赤月恶魔副本
 ["玛雅一赤月恶魔"]= {"天武手镯","天魔手镯","天灵手镯","天武戒指","天魔戒指"},--玛雅一赤月恶魔
 ["牛魔王"]= {"圣武手镯","圣魔手镯","圣灵手镯","圣武靴子","圣魔靴子"},--牛魔王
 ["暗夜女巫"]= {"圣武手镯","圣魔手镯","圣灵手镯","圣武靴子","圣魔靴子"},--暗夜女巫
 ["牛魔王副本"]= {"圣武手镯","圣魔手镯","圣灵手镯","圣武靴子","圣魔靴子"},--牛魔王副本
 ["豹子女王"]= {"圣武手镯","圣魔手镯","圣灵手镯","圣武靴子","圣魔靴子"},--豹子女王
 ["黄泉教主"]= {"威武手镯","幻神手镯","无量手镯","威武戒指","幻神戒指"},--黄泉教主
 ["尸霸"]= {"威武手镯","幻神手镯","无量手镯","威武戒指","幻神戒指"},--尸霸
 ["虹魔教主"]= {"威武手镯","幻神手镯","无量手镯","威武腰带","幻神腰带"},--虹魔教主
 ["魔龙教主"]= {"威武手镯","幻神手镯","无量手镯","洪武行天手镯","天地玄奇手镯"},--魔龙教主
 ["魔龙教主副本"]= {"威武手镯","幻神手镯","无量手镯","洪武行天手镯","天地玄奇手镯"},--魔龙教主副本
 ["火尾黑狐王"]= {"洪武行天手镯","天地玄奇手镯","玄天妙法手镯","洪武行天戒指","天地玄奇戒指"},--火尾黑狐王
 ["金爪赤狐王"]= {"洪武行天手镯","天地玄奇手镯","玄天妙法手镯","洪武行天戒指","天地玄奇戒指"},--金爪赤狐王
 ["玉面素狐王"]= {"洪武行天手镯","天地玄奇手镯","玄天妙法手镯","洪武行天戒指","天地玄奇戒指"},--玉面素狐王
 ["雪域魔王"]= {"洪武行天手镯","天地玄奇手镯","玄天妙法手镯","洪武行天靴子","天地玄奇靴子"},--雪域魔王
 ["雷炎蛛王"]= {"雄武震天手镯","天异玄奥手镯","混天广法手镯","雄武震天头盔","天异玄奥头盔"},--雷炎蛛王
 ["火龙"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--火龙
 ["火龙副本"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--火龙副本
 ["阿修罗神"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--阿修罗神
 ["蛇妖王"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--蛇妖王
 ["深渊蛟龙"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--蛇妖王
 ["寒荒海兽"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--寒荒海兽
 ["深海巨魔"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--深海巨魔
 ["巫妖王"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--巫妖王
 ["炼狱巨魔"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--炼狱魔王
 ["灭世魔君"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--灭世魔君
 ["铁血魔王"]= {"神威亢天手镯","天暴玄宗手镯","昊天玄尊手镯","尊武凌天戒指","天魁玄灵戒指"},--铁血魔王
 ["暗之沃玛教主"]= {"天魔项链","天武项链","天灵戒指","天魔戒指","天武戒指"},--1.90级
 ["暗之祖玛教主"]= {"天魔项链","天武项链","天灵戒指","天魔戒指","天武戒指"},--2.90级
 ["暗之骷髅精灵"]= {"天魔项链","天武项链","天灵戒指","天魔戒指","天武戒指"},--3.90级
 ["暗之双头金刚"]= {"天魔项链","天武项链","天灵戒指","天魔戒指","天武戒指"},--4.90级
 ["暗之牛魔王"]= {"天魔项链","天武项链","天灵戒指","天魔戒指","天武戒指"},--5.90级
 ["暗之尸霸"]= {"天魔手镯","天武手镯","天灵戒指","天魔戒指","天武戒指"},--6.100级
 ["暗之黄泉教主"]= {"天魔手镯","天武手镯","天灵戒指","天魔戒指","天武戒指"},--7.100级
 ["暗之虹魔教主"]= {"天魔手镯","天武手镯","天灵戒指","天魔戒指","天武戒指"},--8.100级
 ["暗之白蛇妖"]= {"天魔手镯","天武手镯","天灵戒指","天魔戒指","天武戒指"},--9.100级
 ["毁灭战神"]= {"天魔手镯","天武手镯","天灵戒指","天魔戒指","天武戒指"},--10.100级
 ["元宝BOSS"]= {"100绑定元宝","500绑定元宝","1000绑定元宝","100元宝","1000元宝"},--活动元宝BOSS
 ["转生神殿白蛇妖1"]= {"圣魔手镯","圣武手镯","天灵手镯","天魔手镯","天武手镯"},--1层.70级以下
 ["转生神殿白蛇妖2"]= {"幻神头盔","威武头盔","圣灵戒指","圣魔戒指","圣武戒指"},--2层.70级以上 
 ["转生神殿白蛇妖3"]= {"幻神戒指","威武戒指","无量手镯","幻神手镯","威武手镯"},--3层.1-2转  100级
 ["转生神殿白蛇妖4"]= {"天地玄极头盔","洪武行天头盔","玄天妙法手镯","天地玄极手镯","洪武行天手镯"},--4层.3-4转 140级
 ["转生神殿白蛇妖5"]= {"天魔手镯","天武手镯","天灵戒指","天魔戒指","天武戒指"},--5层.5-6转 160级
 ["转生神殿白蛇妖6"]= {"天魁玄灵戒指","尊武凌天戒指","混天广法手镯","天异玄奥手镯","雄武震天手镯"},--6层.7-8转 180级
 ["转生神殿白蛇妖7"]= {"天魁玄灵戒指","尊武凌天戒指","鸿天明法手镯","天魁玄灵手镯","尊武凌天手镯"},--7层.9-10转 200级
 ["转生神殿白蛇妖8"]= {"天暴玄宗手镯","神威亢天手镯","鸿天明法戒指","天魁玄灵戒指","尊武凌天戒指"},--8层.11-12转
 ["镇魔宝塔牛魔王"]= {"镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌"},--镇魔宝塔牛魔王
 ["镇魔宝塔虹魔教主"]= {"镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌"},--镇魔宝塔虹魔教主
 ["镇魔宝塔寒荒海兽"]= {"镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌"},--镇魔宝塔寒荒海兽
 ["镇魔宝塔深海巨魔"]= {"镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌","镇魔令牌"},--镇魔宝塔深海巨魔
 ["镇魔宝塔炼狱巨魔"]= {"神威亢天战刃","天暴玄宗法杖","昊天玄尊道剑","神威亢天项链","天暴玄宗项链"},--镇魔宝塔炼狱巨魔
 ["魔族入侵雷炎蛛王"]= {"神威亢天战刃","天暴玄宗法杖","昊天玄尊道剑","神威亢天项链","天暴玄宗项链"},--魔族入侵雷炎蛛王
 ["魔族入侵牛魔王"]= {"BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小"},--魔族入侵牛魔王
 ["魔族入侵黄泉教主"]= {"BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小"},--魔族入侵黄泉教主
 ["魔族入侵赤月恶魔"]= {"BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小"},--魔族入侵赤月恶魔
 ["魔族入侵祖玛教主"]= {"BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小"},--魔族入侵祖玛教主
 ["魔族入侵祖玛教主"]= {"BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小","BOSS积分精魄小"},--魔族入侵沃玛教主
 ["神威狱一层BOSS"]= {"战将手镯","法灵手镯","散人手镯","战将头盔","法灵头盔"},--神威狱一层BOSS
 ["神威狱二层BOSS"]= {"武魂手镯","魔魂手镯","玄魂手镯","武魂戒指","魔魂戒指"},--神威狱二层BOSS
 ["神威狱三层BOSS"]= {"天武手镯","天魔手镯","天灵手镯","天武戒指","天魔戒指"},--神威狱三层BOSS
 ["神威狱四层BOSS"]= {"圣武手镯","圣魔手镯","圣灵手镯","圣武靴子","圣魔靴子"},--神威狱四层BOSS
 ["神威狱五层BOSS"]= {"威武手镯","幻神手镯","无量手镯","威武戒指","幻神戒指"},--神威狱五层BOSS
 ["神威狱六层BOSS"]= {"威武手镯","幻神手镯","无量手镯","威武腰带","幻神腰带"},--神威狱六层BOSS
 ["神威狱七层BOSS"]= {"威武手镯","幻神手镯","无量手镯","洪武行天手镯","天地玄奇手镯"},--神威狱七层BOSS
 ["神威狱八层BOSS"]= {"洪武行天手镯","天地玄奇手镯","玄天妙法手镯","洪武行天靴子","天地玄奇靴子"},--神威狱八层BOSS
 ["神威狱九层BOSS"]= {"雄武震天手镯","天异玄奥手镯","混天广法手镯","雄武震天头盔","天异玄奥头盔"},--神威狱九层BOSS
 ["神威狱十层BOSS"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--神威狱十层BOSS
 ["神威狱十一层BOSS"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--神威狱十一层BOSS
 ["神威狱十二层BOSS"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--神威狱十二层BOSS
 ["神威狱十三层BOSS"]= {"尊武凌天手镯","天魁玄灵手镯","鸿天明法手镯","尊武凌天戒指","天魁玄灵戒指"},--神威狱十三层BOSS 
}
OtherRoleHeadInfo.handle = {}
function OtherRoleHeadInfo.main()
	local tf = GUIWndCreateWnd(0, "OtherRoleHeadInfo", 0, 382, 122)
	local uih = 0
	uih = GUIImageCreate(tf, "GUI_2", 1800500229, 0, 0)
--[[	uih = GUIImageCreate(tf, "lvlEditBackImage", 1800000162, 58, 55)
	if uih ~= 0 then
			GUIWndSetVisible(uih, false)
			OtherRoleHeadInfo.handle["lvlEditBackImage"] = uih
		end--]]
	uih = GUIImageCreate(tf, "HeaderImage", 0, 5, -9)	--	
	if uih ~= 0 then
		--GUIWndSetSizeM(uih, 71, 71)
		GUIImageSetFitSize(uih, true)
		OtherRoleHeadInfo.handle["HeaderImage"] = uih
	end
				
	uih = GUIEditCreate(tf, "RoleName", 95, 8, 100, 20)	--
	if uih ~= 0 then 
		GUIEditSetFontCenter(uih)
		GUIWndSetTextColorM(uih, CLMakeARGB(255, 194, 182, 160))
		GUIEditSetCanEdit(uih, false) 
		GUIWndSetEnableM(uih, false) 
		OtherRoleHeadInfo.handle["RoleName"] = uih
	end
	uih = GUIEditCreate(tf, "Level", 73, 53, 30, 30)	--
	if uih ~= 0 then 
		GUIEditSetFontCenter(uih)
		GUIWndSetTextColorM(uih, CLMakeARGB(255, 194, 182, 160))
		GUIEditSetCanEdit(uih, false) 
		GUIWndSetEnableM(uih, false) 
		OtherRoleHeadInfo.handle["Level"] = uih
	end
	uih = GUIImageCreate(tf,"RoleHP1",1805700004,115,54)
	if _GUIHandle ~= 0 then
		GUIImageSetFitSize(uih, true)
		GUIWndSetSizeM(uih,280, 14)
		GUIWndSetVisible(uih, false)
		OtherRoleHeadInfo.handle["RoleHP1"] = uih
	end
	uih = GUIImageCreate(tf,"RoleHP",1805700003,115,54)
	if uih ~= 0 then
		GUIImageSetFitSize(uih, true)
		GUIWndSetSizeM(uih,280, 14)
		GUIWndSetVisible(uih, false)
		OtherRoleHeadInfo.handle["RoleHP"] = uih
	end

	uih = GUIEditCreate(tf, "RoleHPEdit", 220, 52, 150, 20)	--
	if uih ~= 0 then 
			--GUIEditSetTextM(uih, "10000/120000")
		GUIWndSetTextColorM(uih, CLMakeARGB(255, 194, 182, 160))
		GUIEditSetCanEdit(uih, false) 
		GUIWndSetVisible(uih, false)
		GUIWndSetEnableM(uih, false)
		OtherRoleHeadInfo.handle["RoleHPEdit"] = uih
	end		
	local playerWin = GUIWndCreateWnd(tf, "PlayerWin", 0, 0, 0)
	OtherRoleHeadInfo.handle["PlayerWin"] = playerWin
	uih = GUIButtonCreate(playerWin, "watchBtn", 1800500376, 107, 51)
	if uih ~= 0 then
		GUIWndRegistScript(uih, RDWndBaseCL_mouse_lbUp, "OtherRoleHeadInfo.onWatchBtnUp")
	end
	uih = GUIButtonCreate(playerWin, "teamBtn", 1800500380, 134, 51)
	if uih ~= 0 then
		GUIWndRegistScript(uih, RDWndBaseCL_mouse_lbUp, "OtherRoleHeadInfo.onTeamBtnUp")
	end
	uih = GUIButtonCreate(playerWin, "tradeBtn", 1800500384, 161, 51)
	if uih ~= 0 then
		GUIWndRegistScript(uih, RDWndBaseCL_mouse_lbUp, "OtherRoleHeadInfo.onTradeBtnUp")
	end
	uih = GUIButtonCreate(playerWin, "friendBtn", 1800500388, 188, 51)
	if uih ~= 0 then
		GUIWndRegistScript(uih, RDWndBaseCL_mouse_lbUp, "OtherRoleHeadInfo.onFriendBtnUp")
	end
	uih = GUIButtonCreate(playerWin, "whispBtn", 1800500392, 215, 51)
	if uih ~= 0 then
		GUIWndRegistScript(uih, RDWndBaseCL_mouse_lbUp, "OtherRoleHeadInfo.onWhispBtnUp")
	end
	local bossWin = GUIWndCreateWnd(tf, "BossWin", 0, 0, 0)
	OtherRoleHeadInfo.handle["BossWin"] = bossWin
	uih = GUIImageCreate(bossWin, "BackImage", 1805700002, -3, 0)		
	OtherRoleHeadInfo.handle["bossItem"] = {}	
	for i = 1, 5 do
		uih = GUIItemCtrlCreate(bossWin, "bossItem"..i, 0, 230+(i-1)*33, 73, 28, 28)	
		if uih ~= 0 then
			OtherRoleHeadInfo.handle["bossItem"][i] = uih
			GUIItemCtrlSetBackImageID(uih, 1805700000)
			GUIItemCtrlSetHighlightImageID(uih, 0)
		end
	end
	OtherRoleHeadInfo.UIinit(tf)
end


function OtherRoleHeadInfo.UIinit(h)
	OtherRoleHeadInfo._wnd = h
	GUIWndSetVisible(h, false)
	RegisterUIEvent(LUA_EVENT_CHOOSEPLAYER, "choosePlayer", OtherRoleHeadInfo.onChoosePlayer)
	RegisterUIEvent(LUA_EVENT_HIDECHOOSEPLAYER, "hideChoosePlayer", OtherRoleHeadInfo.onHideChoosePlayer)
	CLSetLuaGlobal("OtherBuffIconDrawSizeX",24)
	CLSetLuaGlobal("OtherBuffIconDrawSizeY",24)
	
end

function OtherRoleHeadInfo.CreateUI(guidtype,name)
	local tf = GetWindow(0,"OtherRoleHeadInfo")
	if tonumber(guidtype) == 0 then
		local handle = OtherRoleHeadInfo.handle["PlayerWin"]
		if handle ~= 0 then
			GUIWndSetVisible(handle, true)
		end
		--[[local handle = OtherRoleHeadInfo.handle["lvlEditBackImage"]
		if handle ~= 0 then
			GUIWndSetVisible(handle, true)
		end--]]
		ImageSetImageID(tf,"GUI_2",1800500229)  
		local handle = OtherRoleHeadInfo.handle["HeaderImage"]
		if handle ~= 0 then
			--GUIWndSetSizeM(handle, 71, 71)
			GUIWndSetPosM(handle, 5, -24)
		end	
		local handle = OtherRoleHeadInfo.handle["RoleName"]
		if handle ~= 0 then
			GUIWndSetPosM(handle, 95,8)
		end	
		local handle = OtherRoleHeadInfo.handle["Level"]
		if handle ~= 0 then
			GUIWndSetPosM(handle, 73,53)
		end	
		local handle = OtherRoleHeadInfo.handle["RoleHP"]
		if handle ~= 0 then
			GUIWndSetVisible(handle, true)
			ImageSetImageID(tf,"RoleHP",1800500230)  
			GUIWndSetPosM(handle, 95,33)
		end	
		local idtab1 = {"RoleHP1","RoleHPEdit"}
		for i = 1 , #idtab1 do 
			local handle = OtherRoleHeadInfo.handle[idtab1[i]]
			if handle ~= 0 then
				GUIWndSetVisible(handle, false)
			else
				break
			end
		end
		
		
		local handle = OtherRoleHeadInfo.handle["BossWin"]
		if handle ~= 0 then
			GUIWndSetVisible(handle, false)
		end
	
		--[[local uih = 0
		local playerGUID = OtherRoleHeadInfo.choosePlayer
		uih = GUIWndFindChildM(tf, "HeaderImage")
		if uih ~= 0 then
			local image_Id = {{1805800001,1805800004},{1805800002,1805800005},{1805800003,1805800006}}
			CLGetPlayerPropBase(playerGUID, ROLE_PROP_JOB)
			local jobID = tonumber(as3.tolua(LuaRet))
			CLGetPlayerPropBase(playerGUID, ROLE_PROP_SEX)
			local genderID = tonumber(as3.tolua(LuaRet))
			local headID = image_Id[jobID][genderID]
			if jobID == 3 and genderID == 2 then
				GUIWndSetSizeM(uih, 69, 84)
				GUIWndSetPosM(uih, 5, -9)
			else
				GUIWndSetSizeM(uih, 71, 71)
				GUIWndSetPosM(uih, 5, 8)
			end
			GUIWndSetImageID(uih, tonumber(headID))
			
		end--]]
		
	elseif tonumber(guidtype) == 2 then
		--[[local handle = OtherRoleHeadInfo.handle["lvlEditBackImage"]
		if handle ~= 0 then
			GUIWndSetVisible(handle, false)
		end--]]
		local handle = OtherRoleHeadInfo.handle["PlayerWin"]
		if handle ~= 0 then
			GUIWndSetVisible(handle, false)
		end
		local idtab = {"RoleHP1","RoleHP","RoleHPEdit"}
		for i = 1 , #idtab do 
			local handle = OtherRoleHeadInfo.handle[idtab[i]]
			if handle ~= 0 then
				GUIWndSetVisible(handle, true)
			end
			if idtab[i]=="RoleHP" then
				ImageSetImageID(tf,"RoleHP",1805700003)  
				GUIWndSetPosM(handle, 116,53)
			end
		end
		local bossWin = OtherRoleHeadInfo.handle["BossWin"]
		if bossWin ~= 0 then
			GUIWndSetVisible(bossWin, true)
		end
		for i = 1, 5 do
			local handle = OtherRoleHeadInfo.handle["bossItem"][i]
			if handle ~= 0 then				
				if OtherRoleHeadInfo.item_tab[name] ~= nil then
					RDItemCtrlSetGUIDataByKeyName(handle,OtherRoleHeadInfo.item_tab[name][i] , 0, false)
				else
					RDItemCtrlSetGUIDataByKeyName(handle,"威武手镯" , 0, false)
				end	
			end
		end
		ImageSetImageID(tf,"GUI_2",1805700001) 
		
		local handle = OtherRoleHeadInfo.handle["HeaderImage"]
		if handle ~= 0 then
			GUIWndSetPosM(handle, 30,37)
		end	
		local handle = OtherRoleHeadInfo.handle["RoleName"]
		if handle ~= 0 then
			GUIWndSetPosM(handle, 125,75)
		end	
		local handle = OtherRoleHeadInfo.handle["Level"]
		if handle ~= 0 then
			GUIWndSetPosM(handle, 94,74)
		end	
	
		
	end
	GUIWndSetVisible(tf, true)
	
end	



function OtherRoleHeadInfo.onWatchBtnUp(h)	
	CLLogicLookInfo(OtherRoleHeadInfo.name)
end

function OtherRoleHeadInfo.onTeamBtnUp(h)
	if CLGetTeamMemberGUIDList() then
		CLLogicTeamInvite(OtherRoleHeadInfo.name)
	else	
		CLOnTeamBtn()
		CLCreateTeam("创建队伍成功","MyTeamUpdata")
		CLAddDelayTask("CLLogicTeamInvite(".."\""..OtherRoleHeadInfo.name.."\""..")",500,1)
		
	end
end

function OtherRoleHeadInfo.onTradeBtnUp()
	CLOnTradeBtn(OtherRoleHeadInfo.name)
end

function OtherRoleHeadInfo.onFriendBtnUp(h)
	CLLogicAddFriend(OtherRoleHeadInfo.name)
end

function OtherRoleHeadInfo.onWhispBtnUp(h)
	CLLogicSendPrivateTalk(OtherRoleHeadInfo.name)
end

function OtherRoleHeadInfo.onChoosePlayer()
	--local playerGUID = as3.tolua(LuaParam[1])
	local playerGUID = as3.tolua(LuaParam[2])
	local guidType = as3.tolua(LuaParam[1])	
	if playerGUID == OtherRoleHeadInfo.choosePlayer then
		return
	end	
	GUIWndSetVisible(OtherRoleHeadInfo._wnd, false)
	OtherRoleHeadInfo.choosePlayer = playerGUID
	
	if tonumber(guidType) == 0 then 
		CLGetPlayerPropBase(playerGUID, ROLE_PROP_ROLENAME)
		OtherRoleHeadInfo.name = as3.tolua(LuaRet)
		OtherRoleHeadInfo.CreateUI(0)
		CLSetLuaGlobal("OtherBuffIconDrawPosX",100)
		CLSetLuaGlobal("OtherBuffIconDrawPosY",78)
	elseif tonumber(guidType) == 2 then
		local num = 0 
		--UI:Lua_SubmitForm("头像选择表单","HeadSelect",""..playerGUID)
		if CLGetMonsterTemplateProperty(playerGUID, MONSTER_PROP_TYPE) then
			num = as3.tolua(LuaRet)
		end
		if num == 4 then
			OtherRoleHeadInfo.CreateUI(2,playerGUID)
		else
			return
		end	
		CLSetLuaGlobal("OtherBuffIconDrawPosX",135)
		CLSetLuaGlobal("OtherBuffIconDrawPosY",106)
	end
	--UI:Lua_SubmitForm("头像选择表单","HeadSelect",""..playerGUID)
end

function OtherRoleHeadInfo.onHideChoosePlayer()
	--msg("as3.tolua(LuaParam[1])="..tostring(as3.tolua(LuaParam[1]))..";OtherRoleHeadInfo.choosePlayer="..tostring(OtherRoleHeadInfo.choosePlayer))
	if as3.tolua(LuaParam[2]) == OtherRoleHeadInfo.choosePlayer then
		OtherRoleHeadInfo.choosePlayer = 0
		GUIWndSetVisible(OtherRoleHeadInfo._wnd, false)
	end
end

OtherRoleHeadInfo.main()